.. _using_invest:

InVEST使用
============

打开模型
-----------------

在MacOS上，所有InVEST模型都包含在一个应用程序中。导航到您的“应用”并从那里打开InVEST，然后从出现的列表中选择模型。

在Windows上，每个InVEST模型显示为独立的程序。导航到开始菜单->所有程序，然后从那里打开模型。

模型运行
-----------------
模型接口由一个表单组成，每个模型输入都有一个字段。对于输入文件，您可以键入路径或使用文件选择器按钮导航到文件。输入所有的输入并且有效后，单击Run按钮。

用于查找和格式化数据的资源
-----------------------------------------
本指南中每个模型的页面都包含一个**数据需求** 部分，描述每个输入的格式。在:ref:`data_sources` 页面提供了查找通用模型输入数据的指导。许多模型还有一个**附录**，用于指导如何查找特定模型的数据。**样例数据** 提供了每个输入的样例。

.. warning::
   样例数据仅用于说明数据结构。样本数据值可能完全是根据旧研究编造或修改的。它们不是通用值或默认值，不应该与自己的数据一起使用或代替它们。

验证
----------
InVEST在您输入时验证所有输入，以确保格式正确。将检查如下内容:
- CSV包含所有预期的列
- 数字输入在允许的范围内
- 所有的空间输入重叠
在所有输入都通过验证之前，模型无法运行。在左侧，绿色的对勾表示输入看起来正确，红色的X表示有问题。单击红色X以查看问题的描述。

查看模型的输出
-----------------------------
所有模型输出都存储在工作空间目录的文件中。大多数输出都是空间文件(矢量或栅格)，但有些模型也会生成csv、HTML文件等。请参阅每个模型页面中的“解释结果”部分，以了解每个输出的详细信息。

当模型完成时，单击“打开工作空间”按钮，在模型工作区目录中打开一个文件管理器窗口。
或者，当模型运行时您可以检查“运行成功后打开工作空间”按钮，以在模型完成时自动打开文件资源管理器窗口。

最终输出
^^^^^^^^^^^^^
最终输出位于工作空间目录的顶层。

中间输出（过程文件）
^^^^^^^^^^^^^^^^^^^^
中间输出（过程文件）是在生成最终输出的过程中产生的文件。有些应用程序可能会对这些中间输出感兴趣，它们对于确定输出模式的来源和调试非常有用。它们位于工作区中的一个目录中，通常称为“intermediate”或“intermediate_dir”。

日志文件
^^^^^^^^
在工作空间目录的顶层，模型生成一个日志文件。它包括所有的参数和值、有关运行的信息和任何出现的错误。日志文件名为``InVEST-[model name]-log-[date]-[time].txt``。


缓存
^^^^^
工作空间还包含一个目录，用于缓存模型过去的运行，如:ref:`avoided recomputation`。它通常被称为“cache”或“cache_dir”。它不包含任何人类可读的数据，您可以忽略它。


高级特性
-----------------

.. _avoided recomputation:

避免重新计算
^^^^^^^^^^^^^^^^^^^^^
所有InVEST模型都支持避免重复计算。这意味着该模型将在指定的工作空间中检测上一次运行的中间和最终结果，并将避免重新计算与上一次运行相同的任何输出。当只更改了一些输入参数时，这可以为后续运行节省大量的处理时间。
注意，这只适用于具有相同后缀的工作空间。如果您删除或更改工作区目录，或更改结果后缀，则不会避免重新计算。

并行进程
^^^^^^^^^^^^^^^^^^^
InVEST模型也支持并行处理。如果有多个CPU，用户可以在下拉菜单中选择要使用的编号*File > Settings > taskgraph_n_workers_parameter*。并不是所有的模型操作都可以并行运行，使用的最佳CPU数量取决于输入数据集。

